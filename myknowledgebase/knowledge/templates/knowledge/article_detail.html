{% extends 'knowledge/base.html' %}

{% block content %}
  <br>
  <h2>{{ article.title }}</h2>
  {% if user.is_superuser or article.created_by == user %}
  <a href="{% url 'edit_article' article.id %}" class="btn btn-warning">Edit Article</a>
  {% endif %}
  <p>{{ article.article|safe }}</p>

  <p><strong>Author:</strong> <a href="{% url 'user_articles' article.created_by.id %}" title="See all articles by {{ author_name }}">{{ author_name }}</a></p>
  <p><strong>Created Date:</strong> {{ created_date|date:"H:i:s jS F, Y" }}</p>
  <p><strong>Last Modified By:</strong> {{ last_modified_by }}</p>
  <p><strong>Last Modified Date:</strong> {{ last_modified_date|date:"H:i:s jS F, Y" }}</p>
  <p><strong>Views:</strong> {{ article.views }}</p>
  <p><strong>Rating:</strong> {{ article.rating }}</p>
  <p><strong>Comments:</strong> {{ article.comments.count }}</p>
  <p><strong>Tags:</strong> {{ article.tags.count }}</p>
  <p><strong>Meta Data:</strong> {{ article.meta_data.count }}</p>
  <br>
  
  {% if user != article.created_by and not user.is_superuser %}
  <button class="btn btn-success" id="upvote">Upvote</button>
  <button class="btn btn-danger" id="downvote">Downvote</button>
  {% endif %}

  <br><br>
  <h3>Metadata Tags</h3>
  <div class="mt-3">
    {% for tag in article.meta_data.all %}
      <a href="{% url 'home' %}?search={{ tag.name }}" class="btn btn-secondary m-1">{{ tag.name }}</a>
    {% endfor %}
  </div>
  <br>

  {% if user.is_superuser %}
  <a href="{% url 'delete_article' article.id %}" class="btn btn-danger">Delete Article</a>
  <br>
  {% endif %}
  <br>
{% endblock %}